<app-sidebar></app-sidebar>
<div class="body-position">
  <app-dashboard-head></app-dashboard-head>
  <div class="main-container">
    <div>
      <h4>Uping</h4>
    </div>
    <div class="card text-nowrap">
      <p-table
        #dt1
        [value]="upingList"
        dataKey="id"
        [globalFilterFields]="['name']"
      >
        <ng-template pTemplate="caption">
          <div class="row">
            <div class="col-3">
              <label class="add-order-label m-0 me-2 d-block">Category</label>
              <p-multiSelect
                styleClass="w-100"
                [options]="categoryList?.productFieldValuesList"
                optionLabel="name"
                optionValue="name"
                (onChange)="onCategoryChange($event.value)"
                placeholder="Filter category"
                display="chip"
              ></p-multiSelect>
            </div>

            <div class="col-3 offset-6">
              <label class="add-order-label m-0 me-2 d-block">Labels</label>
              <p-multiSelect
                styleClass="w-100"
                [options]="labels"
                optionLabel="name"
                optionValue="name"
                (onChange)="permissions($event.value)"
                [(ngModel)]="selectedLabels"
                placeholder="Filter labels"
                display="chip"
              ></p-multiSelect>
            </div>
          </div>
        </ng-template>

        <ng-template pTemplate="header">
          <tr>
            <th class="col">
              <div class="d-flex justify-content-start">Child Sheet</div>
            </th>
            <ng-container *ngFor="let item of paperSizeList">
              <th>
                <div class="d-flex justify-content-center">
                  {{ item.label }}
                </div>
              </th>
            </ng-container>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-element let-i="rowIndex">
          <tr>
            <td class="text-start">
              <div *ngFor="let permission of selectedLabels">
                <div *ngIf="permission === 'Category'">
                  {{ element?.category }}
                </div>
                <div *ngIf="permission === 'Name'">
                  {{ element?.productSize }}
                </div>
                <div *ngIf="permission === 'Dimension'">
                  {{ element?.inch + " in" }}
                </div>
              </div>
            </td>
            <ng-container
              *ngFor="
                let value of checkLabelThenPutValue(element.upingPaperSize)
              "
            >
              <td>
                <div class="d-flex justify-content-center">
                  {{ value !== 0 ? value : null }}
                </div>
              </td>
            </ng-container>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr>
            <td [attr.colspan]="numberOfColumns" class="text-center">
              <ng-container *ngIf="!isLoading && paperSizeList.length === 0">
                No Uping Found.
              </ng-container>
              <ng-container *ngIf="isLoading || paperSizeList.length > 0">
                <app-loader></app-loader>
              </ng-container>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
<p-toast></p-toast>
